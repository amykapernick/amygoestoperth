---
{
	permalink: "feed.json",
	eleventyExcludeFromCollections: true,
	metadata: {
		title: "Amy's Kapers",
		subtitle: "Amy's blog about tech, the web and life",
		url: "https://blog.amyskapers.dev",
		feedUrl: "https://blog.amyskapers.dev/feed.json",
	},
	author: {
		name: "Amy Kapernick",
		twitter: "@Amys_Kapers",
		url: "https://amyskapers.dev"
	}
}
---
{
	"version": "https://jsonfeed.org/version/1",
	"title": "{{ metadata.title }}",
	"home_page_url": "{{ metadata.url }}",
	"feed_url": "{{ metadata.feedUrl }}",
	"description": "{{ metadata.subtitle }}",
	"author": {
		"name": "{{ metadata.author.name }}",
		"twitter": "{{ metadata.author.twitter }}",
		"url": "{{metadata.author.url}}"
	},
	"items": [
		{%- for post in collections.posts | reverse %}
			{%- set absolutePostUrl %}{{ post.url | url | absoluteUrl(metadata.url) }}{% endset -%}
			{
				"id": "{{ absolutePostUrl }}",
				"url": "{{ absolutePostUrl }}",
				"slug": "{{post.fileSlug}}",
				"title": "{{ post.data.title }}",
				"description": "{{ post.data.description }}",
				"categories": 
					{% if post.data.categories %}
						{{ post.data.categories | dump | safe }}
					{% else %}
						[]
					{% endif %},
				"blogs":
					{% if post.data.blog %}
						{{ post.data.blog | dump | safe }}
					{% else %}
						[]
					{% endif %},
				"featured": "https://dev--amygoestoperth.netlify.app{{ post.data.featured }}",
				"content": 
					{% if post.templateContent %}
						{{ post.templateContent | feedContent | dump | safe }}
					{% else %}
						""
					{% endif %},
				"date": "{{ post.date | rssDate }}",
				"publish": 
					{% if post.publish %}
						"{{ post.publish | rssDate }}"
					{% else %}
						""
					{% endif %}
			}
			{% if not loop.last %},{% endif %}
		{%- endfor %}
	]
}